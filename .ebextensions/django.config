option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: expense.wsgi:application

  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: expense.settings
    SECRET_KEY: Vj9Q0dh7TMLJKM1x1jetBHvIY04DdO__WkCCKSoaRchE2fF4niQ1ZNzj-qhV-r76VeA
    DEBUG: "False"
    AWS_STORAGE_BUCKET_NAME: django-static-files-expense
    AWS_S3_REGION_NAME: us-east-1
    ALLOWED_HOSTS: expense-application-env.eba-7v85kh5i.us-east-1.elasticbeanstalk.com

container_commands:
  01_migrate:
    command: "python3 manage.py migrate"
    leader_only: true
  02_collectstatic:
    command: "python3 manage.py collectstatic --noinput"
    leader_only: true

files:
  "/etc/nginx/conf.d/proxy.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      client_max_body_size 10M;